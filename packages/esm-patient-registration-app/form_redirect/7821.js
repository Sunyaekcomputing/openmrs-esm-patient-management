(globalThis.webpackChunk_openmrs_esm_patient_registration_app=globalThis.webpackChunk_openmrs_esm_patient_registration_app||[]).push([[7821],{16210:(e,t,n)=>{"use strict";n.d(t,{GC:()=>p,Qi:()=>b,pX:()=>h,qm:()=>m,zL:()=>y});var r=n(89857),i=n(37127),a=n(16666),o=n(38254),s=n(57691);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){l(a,r,i,o,s,"next",e)}function s(e){l(a,r,i,o,s,"throw",e)}o(void 0)}))}}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function p(){return c((function(){return f(this,(function(e){switch(e.label){case 0:return[4,v("".concat(o.restBaseUrl,"/session"))];case 1:return[2,e.sent().data]}}))}))()}function h(){return c((function(){return f(this,(function(e){switch(e.label){case 0:return[4,v("".concat(o.restBaseUrl,"/addresstemplate"))];case 1:return[2,e.sent().data]}}))}))()}function y(){return c((function(){return f(this,(function(e){switch(e.label){case 0:return[4,v("".concat(o.restBaseUrl,"/relationshiptype?v=default"))];case 1:return[2,e.sent().data]}}))}))()}function m(){return c((function(){var e,t;return f(this,(function(n){switch(n.label){case 0:return[4,(0,o.getConfig)(s.AO)];case 1:return(e=n.sent()).fieldDefinitions?(t=e.fieldDefinitions.map((function(e){return t=e,c((function(){var e;return f(this,(function(n){switch(n.label){case 0:return e="","person attribute"===t.type&&(e="".concat(o.restBaseUrl,"/personattributetype/").concat(t.uuid)),t.answerConceptSetUuid?[4,v("".concat(o.restBaseUrl,"/concept/").concat(t.answerConceptSetUuid))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[4,v(e)];case 3:return[2,n.sent().data]}}))}))();var t})),[4,Promise.all(t)]):[2];case 2:return[2,n.sent().reduce((function(e,t){return t&&e.push(t),e}),[])]}}))}))()}function b(){return c((function(){var e,t,n,i,a,s,u,l;return f(this,(function(p){switch(p.label){case 0:return e=function(e){n[e].identifierSources=u.filter((function(t){return t.identifierType.uuid===n[e].uuid})).map((function(e){var t=(0,r.A)(a.data.results,{source:{uuid:e.uuid}});return e.autoGenerationOption=t,e}))},[4,c((function(){var e,t,n,r,i,a,s,u,l,c;return f(this,(function(f){switch(f.label){case 0:return[4,Promise.all([v("".concat(o.restBaseUrl,"/patientidentifiertype?v=custom:(display,uuid,name,format,formatDescription,required,uniquenessBehavior)")),v("".concat(o.restBaseUrl,"/metadatamapping/termmapping?v=full&code=emr.primaryIdentifierType"))])];case 1:return e=d.apply(void 0,[f.sent(),2]),t=e[0],n=e[1],t.ok?(u=null==t||null===(r=t.data)||void 0===r?void 0:r.results,l=null==n||null===(s=n.data)||void 0===s||null===(a=s.results)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.metadataUuid,c=(null==n?void 0:n.ok)?[g(null==u?void 0:u.find((function(e){return e.uuid===l})),!0)]:[],u.forEach((function(e){e.uuid!==l&&c.push(g(e,!1))})),[2,c]):[2,[]]}}))}))()];case 1:return t=p.sent(),n=t.filter(Boolean),[4,Promise.all([c((function(){return f(this,(function(e){switch(e.label){case 0:return[4,v("".concat(o.restBaseUrl,"/idgen/autogenerationoption?v=full"))];case 1:return[2,e.sent()]}}))}))(),c((function(){return f(this,(function(e){switch(e.label){case 0:return[4,v("".concat(o.restBaseUrl,"/idgen/identifiersource?v=default"))];case 1:return[2,e.sent()]}}))}))()])];case 2:for(i=d.apply(void 0,[p.sent(),2]),a=i[0],s=i[1],u=s.data.results,l=0;l<(null==n?void 0:n.length);l++)e(l);return[2,n]}}))}))()}function v(e){return c((function(){var t;return f(this,(function(n){switch(n.label){case 0:return t=new AbortController,[4,(0,o.messageOmrsServiceWorker)({type:"registerDynamicRoute",pattern:(0,i.A)(e)})];case 1:return n.sent(),[4,(0,o.openmrsFetch)(e,{headers:s.v4,signal:null==t?void 0:t.signal})];case 2:return[2,n.sent()]}}))}))()}function g(e,t){return{name:e.display,fieldName:(0,a.A)(e.name),required:e.required,uuid:e.uuid,format:e.format,formatDescription:e.formatDescription,isPrimary:t,uniquenessBehavior:e.uniquenessBehavior}}},36207:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(30977),i=n.n(r),a=n(95924),o=n.n(a)()(i());o.push([e.id,".-esm-patient-registration__add-patient-link__slotStyles___ejEWZ{background-color:rgba(0,0,0,0)}","",{version:3,sources:["webpack://./src/add-patient-link.scss"],names:[],mappings:"AAAA,iEACE,8BAAA",sourcesContent:[".slotStyles {\n  background-color: transparent;\n}\n"],sourceRoot:""}]),o.locals={slotStyles:"-esm-patient-registration__add-patient-link__slotStyles___ejEWZ"};const s=o},49971:(e,t,n)=>{"use strict";n.d(t,{A4:()=>w,G1:()=>b,SE:()=>v,SP:()=>m,SQ:()=>A,Yu:()=>T,Z:()=>f,hz:()=>g,o9:()=>y,oq:()=>U,t2:()=>p,uH:()=>_,zx:()=>h});var r=n(38254),i=n(46372),a=n.n(i);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function d(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function f(e,t){var n=new AbortController;return(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/patient/").concat(t||""),{headers:{"Content-Type":"application/json"},method:"POST",body:e,signal:n.signal})}function p(e){var t=new AbortController;return(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/encounter"),{headers:{"Content-Type":"application/json"},method:"POST",body:e,signal:t.signal})}function h(e){var t=new AbortController;return(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/idgen/identifiersource/").concat(e,"/identifier"),{headers:{"Content-Type":"application/json"},method:"POST",body:{},signal:t.signal})}function y(e,t){var n=new AbortController;return(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/person/").concat(t,"/name/").concat(e),{method:"DELETE",signal:n.signal})}function m(e){var t=new AbortController;return(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/relationship"),{headers:{"Content-Type":"application/json"},method:"POST",body:e,signal:t.signal})}function b(e,t){var n=new AbortController;return(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/relationship/").concat(e),{headers:{"Content-Type":"application/json"},method:"POST",body:{relationshipType:t.relationshipType},signal:n.signal})}function v(e){var t=new AbortController;return(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/relationship/").concat(e),{headers:{"Content-Type":"application/json"},method:"DELETE",signal:t.signal})}function g(e,t,n,i,a){return u((function(){var o,s;return d(this,(function(u){return o=new AbortController,(s=new FormData).append("patient",e),s.append("file",function(e){for(var t=window.atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);var a=new Blob([r],{type:n});return new File([a],"patient-photo.png")}(t)),s.append("json",JSON.stringify({person:e,concept:a,groupMembers:[],obsDatetime:i})),[2,(0,r.openmrsFetch)(n,{method:"POST",signal:o.signal,body:s})]}))}))()}function _(e,t){return u((function(){var n,i,a,s;return d(this,(function(u){switch(u.label){case 0:return[4,Promise.all([(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/patient?q=").concat(e),{signal:t.signal}),(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/person?q=").concat(e),{signal:t.signal})])];case 1:return n=l.apply(void 0,[u.sent(),2]),i=n[0],a=n[1],d=i.data.results,s=function(e){if(Array.isArray(e))return o(e)}(d)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(d)||c(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a.data.results.forEach((function(e){s.some((function(t){return t.uuid===e.uuid}))||s.push(e)})),[2,s]}var d}))}))()}function w(e,t){return u((function(){var n;return d(this,(function(i){return n=new AbortController,[2,(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/patient/").concat(e,"/identifier/"),{method:"POST",headers:{"Content-Type":"application/json"},signal:n.signal,body:t})]}))}))()}function T(e,t,n){return u((function(){var i;return d(this,(function(a){return i=new AbortController,[2,(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/patient/").concat(e,"/identifier/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},signal:i.signal,body:{identifier:n}})]}))}))()}function A(e,t){return u((function(){var n;return d(this,(function(i){return n=new AbortController,[2,(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/patient/").concat(e,"/identifier/").concat(t,"?purge"),{method:"DELETE",headers:{"Content-Type":"application/json"},signal:n.signal})]}))}))()}function U(e,t,n){var r=new Date(e),i=l(t.split(":").map(Number),2),o=i[0],s=i[1],u="PM"===n?o%12+12:o%12;return a()(r).hour(u).minute(s).second(0).millisecond(0).toDate()}},57691:(e,t,n)=>{"use strict";n.d(t,{AO:()=>u,DA:()=>s,dR:()=>l,v4:()=>c});var r,i,a,o=n(38254),s="custom:(display,uuid,personA:(age,display,birthdate,uuid),personB:(age,display,birthdate,uuid),relationshipType:(uuid,display,description,aIsToB,bIsToA))",u="@openmrs/esm-patient-registration-app",l="patient-registration",c=(r={},a="network-first",(i=o.omrsOfflineCachingStrategyHttpHeaderName)in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r)},84767:(e,t,n)=>{var r={"./am.json":[81197,1197],"./ar.json":[14132,4132],"./ar_SY.json":[37617,7617],"./bn.json":[77159,7159],"./de.json":[34944,4944],"./en.json":[34300,4300],"./en_US.json":[59569,9569],"./es.json":[93099,3099],"./es_MX.json":[88349,8349],"./fr.json":[94055,4055],"./he.json":[84652,4652],"./hi.json":[36840,6840],"./hi_IN.json":[55442,5442],"./id.json":[72690,2690],"./it.json":[9538,9538],"./ka.json":[70795,795],"./km.json":[54335,4335],"./ku.json":[9895,9895],"./ky.json":[88163,8163],"./lg.json":[64618,4618],"./ne.json":[12146,2146],"./pl.json":[41119,1119],"./pt.json":[96679,6679],"./pt_BR.json":[36468,6468],"./qu.json":[35173,5173],"./ro_RO.json":[46022,6022],"./ru_RU.json":[60986,986],"./si.json":[56859,6859],"./sw.json":[89913,9913],"./sw_KE.json":[88618,8618],"./tr.json":[55241,5241],"./tr_TR.json":[99900,9900],"./uk.json":[60723,723],"./uz.json":[43584,3584],"./uz@Latn.json":[27097,7097],"./uz_UZ.json":[70890,890],"./vi.json":[79214,9214],"./zh.json":[35661,5661],"./zh_CN.json":[99879,9879]};function i(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((()=>n(i)))}i.keys=()=>Object.keys(r),i.id=84767,e.exports=i},87821:(e,t,n)=>{"use strict";n.r(t),n.d(t,{addPatientLink:()=>x,cancelPatientEditModal:()=>L,deleteIdentifierConfirmationModal:()=>G,editPatient:()=>R,editPatientDetailsButton:()=>M,importTranslation:()=>I,patientPhotoExtension:()=>q,root:()=>F,startupApp:()=>N});var r=n(38254),i=n(95008),a=n(57691),o=n(16210),s=n(97e3);function u(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){u(a,r,i,o,s,"next",e)}function s(e){u(a,r,i,o,s,"throw",e)}o(void 0)}))}}function c(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function d(e){return["".concat(r.fhirBaseUrl,"/Patient/").concat(e),"".concat(r.restBaseUrl,"/relationship?v=").concat(a.DA,"&person=").concat(e),"".concat(r.restBaseUrl,"/person/").concat(e,"/attribute"),"".concat(r.restBaseUrl,"/patient/").concat(e,"/identifier?v=custom:(uuid,identifier,identifierType:(uuid,required,name),preferred)")].map((function(e){return window.origin+(0,r.makeUrl)(e)}))}function f(e,t){return l((function(){return c(this,(function(n){switch(n.label){case 0:return[4,s.A.savePatientFormOnline(e._patientRegistrationData.isNewPatient,e._patientRegistrationData.formValues,e._patientRegistrationData.patientUuidMap,e._patientRegistrationData.initialAddressFieldValues,e._patientRegistrationData.capturePhotoProps,e._patientRegistrationData.currentLocation,e._patientRegistrationData.initialIdentifierValues,e._patientRegistrationData.currentUser,e._patientRegistrationData.config,e._patientRegistrationData.savePatientTransactionManager,t.abort)];case 1:return n.sent(),[2]}}))}))()}var p=n(1343),h=n.n(p),y=n(93150),m=n(36554),b=n(85951),v=n(72591),g=n.n(v),_=n(1740),w=n.n(_),T=n(88128),A=n.n(T),U=n(30855),S=n.n(U),D=n(93051),P=n.n(D),O=n(73656),j=n.n(O),B=n(36207),C={};C.styleTagTransform=j(),C.setAttributes=S(),C.insert=A().bind(null,"head"),C.domAPI=w(),C.insertStyleElement=P(),g()(B.A,C);const k=B.A&&B.A.locals?B.A.locals:void 0;var I=n(84767),E={featureName:"Patient Registration",moduleName:a.AO};function N(){(0,r.defineConfigSchema)(a.AO,i.hV),(0,r.registerBreadcrumbs)([{path:"".concat(window.spaBase,"/").concat(a.dR),title:function(){return Promise.resolve(window.i18next.t("patientRegistrationBreadcrumb",{defaultValue:"Patient Registration",ns:a.AO}))},parent:"".concat(window.spaBase,"/home")},{path:"".concat(window.spaBase,"/patient/:patientUuid/edit"),title:function(){return Promise.resolve(window.i18next.t("editPatientDetailsBreadcrumb",{defaultValue:"Edit patient details",ns:a.AO}))},parent:"".concat(window.spaBase,"/patient/:patientUuid/chart")}]),(0,r.setupOfflineSync)(a.dR,[],f,{onBeginEditSyncItem:function(e){(0,r.navigate)({to:"${openmrsSpaBase}/patient/".concat(e.content.fhirPatient.id,"/edit")})}}),l((function(){return c(this,(function(e){switch(e.label){case 0:return[4,Promise.all([(0,o.GC)(),(0,o.pX)(),(0,o.zL)(),(0,o.qm)(),(0,o.Qi)()])];case 1:return e.sent(),[2]}}))}))(),(0,r.setupDynamicOfflineDataHandler)({id:"esm-patient-registration-app:patient",type:"patient",displayName:"Patient registration",isSynced:function(e){return l((function(){var t,n;return c(this,(function(r){switch(r.label){case 0:return t=d(e),[4,caches.open("omrs-spa-cache-v1")];case 1:return[4,r.sent().keys()];case 2:return n=r.sent().map((function(e){return e.url})),[2,t.every((function(e){return n.includes(e)}))]}}))}))()},sync:function(e){return l((function(){var t;return c(this,(function(n){switch(n.label){case 0:return t=d(e),[4,Promise.allSettled(t.map((function(e){return l((function(){return c(this,(function(t){switch(t.label){case 0:return[4,(0,r.messageOmrsServiceWorker)({type:"registerDynamicRoute",url:e})];case 1:return t.sent(),[4,fetch(e)];case 2:return t.sent(),[2]}}))}))()})))];case 1:return n.sent(),[2]}}))}))()}})}var F=(0,r.getAsyncLifecycle)((function(){return Promise.all([n.e(4464),n.e(6415),n.e(5434),n.e(7109),n.e(627)]).then(n.bind(n,30627))}),E),R=(0,r.getAsyncLifecycle)((function(){return Promise.all([n.e(4464),n.e(6415),n.e(5434),n.e(7109),n.e(627)]).then(n.bind(n,30627))}),E),x=(0,r.getSyncLifecycle)((function(){var e=(0,y.useTranslation)().t,t=h().useCallback((function(){return(0,r.navigate)({to:"${openmrsSpaBase}/patient-registration"})}),[]);return h().createElement(m.V8d,{"aria-label":e("addPatient","Add patient"),"aria-labelledby":e("addPatient","Add patient"),enterDelayMs:500,name:"AddPatientIcon",onClick:t,className:k.slotStyles},h().createElement(b.rs,{size:20}))}),E),L=(0,r.getAsyncLifecycle)((function(){return n.e(8434).then(n.bind(n,58434))}),E),q=(0,r.getAsyncLifecycle)((function(){return n.e(4463).then(n.bind(n,94463))}),E),M=(0,r.getAsyncLifecycle)((function(){return n.e(3093).then(n.bind(n,43093))}),E),G=(0,r.getAsyncLifecycle)((function(){return n.e(6276).then(n.bind(n,56276))}),E)},95008:(e,t,n)=>{"use strict";n.d(t,{hV:()=>u,t_:()=>s,yk:()=>o});var r=n(38254);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=[{id:"demographics",name:"Basic Info",fields:["id"]}],s=["name","gender","dob","id","address","phone","causeOfDeath","dateAndTimeOfDeath"],u={sections:{_type:r.Type.Array,_default:["demographics","contact","relationships"],_description:"An array of strings which are the keys from 'sectionDefinitions' or any of the following built-in sections: '".concat(o.map((function(e){return e.id})).join("', '"),"'."),_elements:{_type:r.Type.String}},sectionDefinitions:{_type:r.Type.Array,_elements:{id:{_type:r.Type.String,_description:"How this section will be referred to in the `sections` configuration. To override a built-in section, use that section's id. The built in section ids are '".concat(o.map((function(e){return e.id})).join("', '"),"'.")},name:{_type:r.Type.String,_description:"The title to display at the top of the section."},fields:{_type:r.Type.Array,_default:[],_description:"The parts to include in the section. Can be any of the following built-in fields: ".concat(s.join(", "),". Can also be an id from an object in the `fieldDefinitions` array, which you can use to define custom fields."),_elements:{_type:r.Type.String}}},_default:[]},fieldDefinitions:{_type:r.Type.Array,_elements:{id:{_type:r.Type.String,_description:"How this field will be referred to in the `fields` element of the `sectionDefinitions` configuration."},type:{_type:r.Type.String,_description:"How this field's data will be storedâ€”a person attribute or an obs.",_validators:[r.validators.oneOf(["person attribute","obs"])]},uuid:{_type:r.Type.UUID,_description:"Person attribute type UUID that this field's data should be saved to."},showHeading:{_type:r.Type.Boolean,_description:"Whether to show a heading above the person attribute field.",_default:!1},label:{_type:r.Type.String,_default:null,_description:"The label of the input. By default, uses the metadata `display` attribute."},placeholder:{_type:r.Type.String,_default:"",_description:"Placeholder that will appear in the input."},allowFutureDates:{_type:r.Type.Boolean,_default:!0,_description:"Indicates whether the date input field should allow the selection of future dates or not."},allowPastDates:{_type:r.Type.Boolean,_default:!0,_description:"Indicates whether the date input field should allow the selection of past dates or not."},validation:{required:{_type:r.Type.Boolean,_default:!1},matches:{_type:r.Type.String,_default:null,_description:"Optional RegEx for testing the validity of the input."}},locationTag:{_type:r.Type.String,_default:null,_description:'Only for fields with "person attribute" type `org.openmrs.Location`. This filters the list of location options in the dropdown based on their location tag. By default, all locations are shown.'},answerConceptSetUuid:{_type:r.Type.ConceptUuid,_default:null,_description:"For coded questions only. A concept which has the possible responses either as answers or as set members."},customConceptAnswers:{_type:r.Type.Array,_elements:{uuid:{_type:r.Type.UUID,_description:"Answer concept UUID"},label:{_type:r.Type.String,_default:null,_description:"The custom label for the answer concept."}},_default:[],_description:"For coded questions only (obs or person attrbute). A list of custom concept answers. Overrides answers that come from the obs concept or from `answerSetConceptUuid`."}},_default:[],_description:"Definitions for custom fields that can be used in sectionDefinitions. Can also be used to override built-in fields."},fieldConfigurations:{causeOfDeath:{conceptUuid:{_type:r.Type.ConceptUuid,_description:"The concept UUID to get cause of death answers",_default:"9272a14b-7260-4353-9e5b-5787b5dead9d"},required:{_type:r.Type.Boolean,_default:!1}},name:{displayMiddleName:{_type:r.Type.Boolean,_default:!0},allowUnidentifiedPatients:{_type:r.Type.Boolean,_default:!0,_description:"Whether to allow registering unidentified patients."},defaultUnknownGivenName:{_type:r.Type.String,_default:"UNKNOWN",_description:"The given/first name to record for unidentified patients."},defaultUnknownFamilyName:{_type:r.Type.String,_default:"UNKNOWN",_description:"The family/last name to record for unidentified patients."},displayCapturePhoto:{_type:r.Type.Boolean,_default:!0,_description:"Whether to display capture patient photo slot on name field"},displayReverseFieldOrder:{_type:r.Type.Boolean,_default:!1,_description:"Whether to display the name fields in the order 'Family name' -> 'Middle name' -> 'First name'"}},gender:{_type:r.Type.Array,_elements:{value:{_type:r.Type.String,_description:"Value that will be sent to the server. Limited to FHIR-supported values for Administrative Gender",_validators:[r.validators.oneOf(["male","female","other","unknown"])]},label:{_type:r.Type.String,_default:null,_description:'The label displayed for the sex option, if it should be different from the value (the value will be translated; the English "translation" is upper-case).'}},_default:[{value:"male"},{value:"female"},{value:"other"},{value:"unknown"}],_description:"The options for sex selection during patient registration. This is Administrative Gender as it is called by FHIR (Possible options are limited to those defined in FHIR Administrative Gender, see https://hl7.org/fhir/R4/valueset-administrative-gender.html)."},defaultGenderValue:{_type:r.Type.String,_default:"unknown",_description:"The default gender value to select and send if none is chosen by user"},address:{useAddressHierarchy:{enabled:{_type:r.Type.Boolean,_description:"Whether to use the Address hierarchy in the registration form or not",_default:!0},useQuickSearch:{_type:r.Type.Boolean,_description:"Whether to use the quick searching through the address saved in the database pre-fill the form.",_default:!0},searchAddressByLevel:{_type:r.Type.Boolean,_description:"Whether to fill the addresses by levels, i.e. County => subCounty, the current field is dependent on it's previous field.",_default:!1},useAddressHierarchyLabel:{_type:r.Type.Object,_description:"Whether to use custom labels for address hierarchy",_default:{}}}},dateOfBirth:{allowEstimatedDateOfBirth:{_type:r.Type.Boolean,_description:"Whether to allow estimated date of birth for a patient during registration",_default:!0},useEstimatedDateOfBirth:{enabled:{_type:r.Type.Boolean,_description:"Whether to use a fixed day and month for estimated date of birth",_default:!1},dayOfMonth:{_type:r.Type.Number,_description:"The custom day of the month use on the estimated date of birth",_default:0},month:{_type:r.Type.Number,_description:"The custom month to use on the estimated date of birth i.e 0 = Jan & 11 = Dec",_default:0}}},phone:{personAttributeUuid:{_type:r.Type.UUID,_default:"14d4f066-15f5-102d-96e4-000c29c2a5d7",_description:"The UUID of the phone number person attribute type"},validation:{required:{_type:r.Type.Boolean,_default:!1},matches:{_type:r.Type.String,_default:null,_description:"Optional RegEx for testing the validity of the input."}}}},links:{submitButton:{_type:r.Type.String,_default:"${openmrsSpaBase}/patient/${patientUuid}/chart",_validators:[r.validators.isUrlWithTemplateParameters(["patientUuid"])]}},defaultPatientIdentifierTypes:{_type:r.Type.Array,_elements:{_type:r.Type.PatientIdentifierTypeUuid},_default:[]},registrationObs:{encounterTypeUuid:{_type:r.Type.UUID,_default:null,_description:"Obs created during registration will be associated with an encounter of this type. This must be set in order to use fields of type `obs`."},encounterProviderRoleUuid:{_type:r.Type.UUID,_default:"a0b03050-c99b-11e0-9572-0800200c9a66",_description:"The provider role to use for the registration encounter. Default is 'Unkown'."},registrationFormUuid:{_type:r.Type.UUID,_default:null,_description:"The form UUID to associate with the registration encounter. By default no form will be associated."}},freeTextFieldConceptUuid:{_default:"5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",_type:r.Type.ConceptUuid},_validators:[(0,r.validator)((function(e){return!e.fieldDefinitions.some((function(e){return"obs"==e.type}))||null!=e.registrationObs.encounterTypeUuid}),"If fieldDefinitions contains any fields of type 'obs', `registrationObs.encounterTypeUuid` must be specified."),(0,r.validator)((function(e){return e.sections.every((function(t){return a(o).concat(a(e.sectionDefinitions)).map((function(e){return e.id})).includes(t)}))}),(function(e){var t=a(o).concat(a(e.sectionDefinitions)).map((function(e){return e.id})),n=e.sections.find((function(e){return!t.includes(e)}));return"'".concat(n,"' is not a valid section ID. Valid section IDs include the built-in sections ").concat(l(o))+(e.sectionDefinitions.length?"; and the defined sections ".concat(l(e.sectionDefinitions),"."):".")})),(0,r.validator)((function(e){return e.sectionDefinitions.every((function(t){return t.fields.every((function(t){return a(s).concat(a(e.fieldDefinitions.map((function(e){return e.id})))).includes(t)}))}))}),(function(e){var t=a(s).concat(a(e.fieldDefinitions.map((function(e){return e.id})))),n=e.sectionDefinitions.find((function(e){return e.fields.some((function(e){return!t.includes(e)}))})),r=n.fields.find((function(e){return!t.includes(e)}));return"The section definition '".concat(n.id,"' contains an invalid field '").concat(r,"'. 'fields' can only contain the built-in fields '").concat(s.join("', '"),"'")+(e.fieldDefinitions.length?"; or the defined fields ".concat(l(e.fieldDefinitions),"."):".")}))]};function l(e){return"'".concat(e.map((function(e){return e.id})).join("', '"),"'")}},97e3:(e,t,n)=>{"use strict";n.d(t,{A:()=>y,u:()=>m});var r=n(38254),i=n(57691),a=n(49971);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var y=function(){function e(){l(this,e)}var t,n;return t=e,n=[{key:"saveRelationships",value:function(e,t){return u((function(){return h(this,(function(n){return[2,Promise.all(e.filter((function(e){return e.relationshipType})).filter((function(e){return!!e.action})).map((function(e){var n=e.relatedPersonUuid,r=e.relationshipType,i=e.uuid,o=e.action,s=p(r.split("/"),2),u=s[0],l=s[1],c=t.data.uuid,d="aIsToB"===l,f={personA:d?n:c,personB:d?c:n,relationshipType:u};switch(o){case"ADD":return(0,a.SP)(f);case"UPDATE":return(0,a.G1)(i,f);case"DELETE":return(0,a.SE)(i)}})))]}))}))()}},{key:"saveObservations",value:function(e,t,n,r,i){return u((function(){var o;return h(this,(function(s){if(e&&Object.keys(e).length>0){if(i.registrationObs.encounterTypeUuid)return o={encounterDatetime:new Date,patient:t.data.uuid,encounterType:i.registrationObs.encounterTypeUuid,location:n,encounterProviders:[{provider:r.currentProvider.uuid,encounterRole:i.registrationObs.encounterProviderRoleUuid}],form:i.registrationObs.registrationFormUuid,obs:Object.entries(e).filter((function(e){return""!==p(e,2)[1]})).map((function(e){var t=p(e,2);return{concept:t[0],value:t[1]}}))},[2,(0,a.t2)(o)];console.error("The registration form has been configured to have obs fields, but no registration encounter type has been configured. Obs field values will not be saved.")}return[2]}))}))()}},{key:"savePatientIdentifiers",value:function(e,t,n,r,i){return u((function(){var o;return h(this,(function(s){return o=Object.values(n).filter((function(e){var t=e.identifierValue,n=e.autoGeneration,r=e.selectedSource;return t||n&&r})).map((function(n){return u((function(){var r,o,s,u,l,c,d,f,p,y,m,b;return h(this,(function(h){switch(h.label){case 0:return o=n.identifierTypeUuid,s=n.identifierValue,u=n.identifierUuid,l=n.selectedSource,c=n.preferred,d=n.autoGeneration,f=n.initialValue,p=d&&(null==l||null===(r=l.autoGenerationOption)||void 0===r?void 0:r.manualEntryEnabled)&&!!s,d&&!p?[3,1]:(m=s,[3,4]);case 1:return[4,(0,a.zx)(l.uuid)];case 2:return[4,h.sent().data.identifier];case 3:m=h.sent(),h.label=4;case 4:return b={uuid:u,identifier:y=m,identifierType:o,location:i,preferred:c},e?[3,8]:f?[3,6]:[4,(0,a.A4)(t,b)];case 5:return h.sent(),[3,8];case 6:return f===y?[3,8]:[4,(0,a.Yu)(t,u,b.identifier)];case 7:h.sent(),h.label=8;case 8:return[2,b]}}))}))()})),t&&Object.keys(r).filter((function(e){return!n[e]})).forEach((function(e){return u((function(){return h(this,(function(n){switch(n.label){case 0:return[4,(0,a.SQ)(t,r[e].identifierUuid)];case 1:return n.sent(),[2]}}))}))()})),[2,Promise.all(o)]}))}))()}},{key:"getDeletedNames",value:function(e,t){return(null==t?void 0:t.additionalNameUuid)?[{nameUuid:t.additionalNameUuid,personUuid:e}]:[]}},{key:"getPatientToCreate",value:function(t,n,r,i,a,o){var s,u,l;return u=n.birthdate,s=(null!=(l=Date)&&"undefined"!=typeof Symbol&&l[Symbol.hasInstance]?l[Symbol.hasInstance](u):u instanceof l)?[n.birthdate.getFullYear(),n.birthdate.getMonth()+1,n.birthdate.getDate()].join("-"):n.birthdate,{uuid:n.patientUuid,person:f({uuid:n.patientUuid,names:e.getNames(n,r),gender:n.gender.charAt(0).toUpperCase(),birthdate:s,birthdateEstimated:n.birthdateEstimated,attributes:e.getPatientAttributes(t,n,r),addresses:[n.address]},e.getPatientDeathInfo(n,o)),identifiers:a}}},{key:"getNames",value:function(e,t){var n=[{uuid:t.preferredNameUuid,preferred:!0,givenName:e.givenName,middleName:e.middleName,familyName:e.familyName}];return e.addNameInLocalLanguage&&n.push({uuid:t.additionalNameUuid,preferred:!1,givenName:e.additionalGivenName,middleName:e.additionalMiddleName,familyName:e.additionalFamilyName}),n}},{key:"getPatientAttributes",value:function(e,t,n){var i=[];return t.attributes&&(Object.entries(t.attributes).filter((function(e){return!!p(e,2)[1]})).forEach((function(e){var t=p(e,2),n=t[0],r=t[1];i.push({attributeType:n,value:r})})),!e&&t.patientUuid&&Object.entries(t.attributes).filter((function(e){return!p(e,2)[1]})).forEach((function(e){var i=p(e,1)[0];return u((function(){var e;return h(this,(function(a){switch(a.label){case 0:return e=n["attribute.".concat(i)],[4,(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/person/").concat(t.patientUuid,"/attribute/").concat(e),{method:"DELETE"}).catch((function(e){console.error(e)}))];case 1:return a.sent(),[2]}}))}))()}))),i}},{key:"getPatientDeathInfo",value:function(e,t){var n=e.isDead,i=e.deathDate,o=e.deathTime,s=e.deathTimeFormat,u=e.deathCause,l=e.nonCodedCauseOfDeath;return n?f({dead:!0,deathDate:(0,r.toOmrsIsoString)((0,a.oq)(i,o,s))},u===(null==t?void 0:t.freeTextFieldConceptUuid)?{causeOfDeathNonCoded:l,causeOfDeath:null}:{causeOfDeath:u,causeOfDeathNonCoded:null}):{dead:!1}}},{key:"mapPatientToFhirPatient",value:function(e){var t,n,r,i,a,o;return{id:e.uuid,gender:null===(t=e.person)||void 0===t?void 0:t.gender,birthDate:null===(n=e.person)||void 0===n?void 0:n.birthdate,deceasedBoolean:e.person.dead,deceasedDateTime:e.person.deathDate,name:null===(i=e.person)||void 0===i||null===(r=i.names)||void 0===r?void 0:r.map((function(e){return{given:[e.givenName,e.middleName].filter(Boolean),family:e.familyName}})),address:null===(a=e.person)||void 0===a?void 0:a.addresses.map((function(e){return{city:e.cityVillage,country:e.country,postalCode:e.postalCode,state:e.stateProvince,use:"home"}})),telecom:null===(o=e.person.attributes)||void 0===o?void 0:o.filter((function(e){return"Telephone Number"===e.attributeType}))}}}],null&&c(t.prototype,null),n&&c(t,n),e}();d(y,"savePatientFormOffline",(function(e,t,n,a,o,s,l,c,d){return u((function(){var u;return h(this,(function(f){switch(f.label){case 0:return u={fhirPatient:y.mapPatientToFhirPatient(y.getPatientToCreate(e,t,n,a,[],d)),_patientRegistrationData:{isNewPatient:e,formValues:t,patientUuidMap:n,initialAddressFieldValues:a,capturePhotoProps:o,currentLocation:s,initialIdentifierValues:l,currentUser:c,config:d,savePatientTransactionManager:new m}},[4,(0,r.queueSynchronizationItem)(i.dR,u,{id:t.patientUuid,displayName:"Patient registration",patientUuid:u.fhirPatient.id,dependencies:[]})];case 1:return f.sent(),[2,null]}}))}))()})),d(y,"savePatientFormOnline",(function(e,t,n,i,o,s,l,c,d,f,p){return u((function(){var p,m,b,v;return h(this,(function(g){switch(g.label){case 0:return[4,y.savePatientIdentifiers(e,t.patientUuid,t.identifiers,l,s)];case 1:return p=g.sent(),m=y.getPatientToCreate(e,t,n,i,p,d),y.getDeletedNames(t.patientUuid,n).forEach((function(e){return u((function(){return h(this,(function(t){switch(t.label){case 0:return[4,(0,a.o9)(e.nameUuid,e.personUuid)];case 1:return t.sent(),[2]}}))}))()})),[4,(0,a.Z)(m,e&&!f.patientSaved?void 0:t.patientUuid)];case 2:return(b=g.sent()).ok?(f.patientSaved=!0,[4,y.saveRelationships(t.relationships,b)]):[3,7];case 3:return g.sent(),[4,y.saveObservations(t.obs,b,s,c,d)];case 4:return g.sent(),[4,(0,r.getConfig)("@openmrs/esm-styleguide")];case 5:return(v=g.sent().patientPhotoConceptUuid)&&(null==o?void 0:o.imageData)?[4,(0,a.hz)(b.data.uuid,o.imageData,"".concat(r.restBaseUrl,"/obs"),o.dateTime||(new Date).toISOString(),v)]:[3,7];case 6:g.sent(),g.label=7;case 7:return[2,b.data.uuid]}}))}))()}));var m=function e(){l(this,e),d(this,"patientSaved",!1)}}}]);